<!DOCTYPE html>
<html>

<head>
    <title>Table with Context Menu</title>
</head>

<body>
    <table border="1" id="myTable">
        <tr>
            <th>Word</th>
            <th>Vocab</th>
            <th>Sentences</th>
        </tr>
        <tr>
            <td>good</td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>hello</td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>world</td>
            <td></td>
            <td></td>
        </tr>
        <!-- Add more rows as needed -->
    </table>

    <script>
        const table = document.getElementById("myTable");
        let selectedCell;
        // Create and append the context menu element
        const contextMenu = document.createElement("div");
        contextMenu.className = "context-menu";
        contextMenu.innerHTML = `
      <ul>
        <li id="populateSentences">Populate Sentences</li>
      </ul>
    `;
        document.body.appendChild(contextMenu);

        // Hide context menu
        function hideContextMenu() {
            contextMenu.style.display = "none";
        }

        // Show context menu at the mouse click position
        function showContextMenu(event) {
            event.preventDefault();
            contextMenu.style.left = `${event.clientX}px`;
            contextMenu.style.top = `${event.clientY}px`;
            contextMenu.style.display = "block";
        }

        // Attach context menu event to the table
        table.addEventListener("contextmenu", function (event) {
            selectedCell = event.target.closest("td");
            if (!selectedCell || selectedCell.cellIndex !== 0) {
                hideContextMenu();
                return;
            }
            showContextMenu(event);
        });

        // Attach click event to context menu items
        contextMenu.addEventListener("click", function (event) {
            const selectedText = window.getSelection().toString().trim();
            //const selectedCell = event.target.closest("td");
            if (!selectedCell || selectedCell.cellIndex !== 0) {
                hideContextMenu();
                return;
            }

            // Find the row for the selected cell
            const selectedRow = selectedCell.parentElement;

            const sentenceColumnIndex = Array.from(table.querySelectorAll("th")).findIndex(th => th.textContent === "Sentences");
            console.log("Index of 'Sentences' column:", sentenceColumnIndex);

            // Find the cell in the "Vocab" column of the same row
            const sentenceCell = selectedRow.querySelector("td:nth-child(" + (sentenceColumnIndex + 1) + ")");

            if (event.target.id === "populateSentences") {
                if (sentenceCell) {
                    sentenceCell.textContent = "OK";
                }
            }
            hideContextMenu();
        });

        // Hide context menu when clicking outside
        window.addEventListener("click", hideContextMenu);

    // ... Rest of the code ...
    </script>

    <style>
        .context-menu {
            position: absolute;
            background-color: white;
            border: 1px solid #ccc;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
            display: none;
        }

        .context-menu ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .context-menu li {
            padding: 5px 10px;
            cursor: pointer;
        }
    </style>
</body>

</html>